



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.2.2">
    
    
      
        <title>Install client/server - PyMapManager</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.7a4cdee3.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="PyMapManager" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                PyMapManager
              </span>
              <span class="md-header-nav__topic">
                Install client/server
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="http://github.com/cudmore/PyMapManager" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    PyMapManager
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="http://github.com/cudmore/PyMapManager" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../install-pymapmanager/" title="Install PyMapManager" class="md-nav__link">
      Install PyMapManager
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Install client/server
      </label>
    
    <a href="./" title="Install client/server" class="md-nav__link md-nav__link--active">
      Install client/server
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#web-based-browsing" title="Web based browsing" class="md-nav__link">
    Web based browsing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#browsing-annotations" title="Browsing annotations" class="md-nav__link">
    Browsing annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browsing-images" title="Browsing images" class="md-nav__link">
    Browsing images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-installing-software-to-run-the-servers" title="1) Installing software to run the servers" class="md-nav__link">
    1) Installing software to run the servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-sure-you-have-redis" title="Make sure you have redis" class="md-nav__link">
    Make sure you have redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-sure-you-have-gunicorn" title="Make sure you have gunicorn" class="md-nav__link">
    Make sure you have gunicorn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-sure-you-have-node-npm-and-http-server" title="Make sure you have Node npm and http-server" class="md-nav__link">
    Make sure you have Node npm and http-server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-install-pymapmanager" title="2) Install PyMapManager" class="md-nav__link">
    2) Install PyMapManager
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clone-the-repository" title="Clone the repository" class="md-nav__link">
    Clone the repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-a-virtual-environment-mm_env-and-activate-it" title="Make a virtual environment mm_env and activate it" class="md-nav__link">
    Make a virtual environment mm_env and activate it
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-pymapmanager" title="Install PyMapManager" class="md-nav__link">
    Install PyMapManager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependencies-for-mmserver" title="Install dependencies for mmserver" class="md-nav__link">
    Install dependencies for mmserver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-either-run-the-servers-with-a-script" title="3) Either, run the servers with a script" class="md-nav__link">
    3) Either, run the servers with a script
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-the-servers-with" title="Start the servers with" class="md-nav__link">
    Start the servers with
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop-the-servers-with" title="Stop the servers with" class="md-nav__link">
    Stop the servers with
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-local-servers" title="Access local servers" class="md-nav__link">
    Access local servers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-or-run-the-servers-manually" title="4) Or, run the servers manually" class="md-nav__link">
    4) Or, run the servers manually
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-the-rest-server" title="Run the REST server" class="md-nav__link">
    Run the REST server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-the-rest-server" title="Check the rest server" class="md-nav__link">
    Check the rest server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-mmclient-javascript-client" title="Run the mmclient Javascript client" class="md-nav__link">
    Run the mmclient Javascript client
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-the-mmclient-at" title="View the mmclient at" class="md-nav__link">
    View the mmclient at
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rewrite-this-to-use-proper-forwarding-in-nginx-using-uwsgi-running-the-clientserver-on-a-linux-system-with-a-pre-existing-web-server" title="[REWRITE THIS TO USE PROPER FORWARDING IN nginx USING uwsgi] Running the client/server on a Linux system with a pre-existing web-server" class="md-nav__link">
    [REWRITE THIS TO USE PROPER FORWARDING IN nginx USING uwsgi] Running the client/server on a Linux system with a pre-existing web-server
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rest-api/" title="REST API" class="md-nav__link">
      REST API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/a-plotting-annotations/" title="a-plotting-annotations" class="md-nav__link">
      a-plotting-annotations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../dev-notes/" title="Development Notes" class="md-nav__link">
      Development Notes
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#web-based-browsing" title="Web based browsing" class="md-nav__link">
    Web based browsing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#browsing-annotations" title="Browsing annotations" class="md-nav__link">
    Browsing annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browsing-images" title="Browsing images" class="md-nav__link">
    Browsing images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-installing-software-to-run-the-servers" title="1) Installing software to run the servers" class="md-nav__link">
    1) Installing software to run the servers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make-sure-you-have-redis" title="Make sure you have redis" class="md-nav__link">
    Make sure you have redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-sure-you-have-gunicorn" title="Make sure you have gunicorn" class="md-nav__link">
    Make sure you have gunicorn
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-sure-you-have-node-npm-and-http-server" title="Make sure you have Node npm and http-server" class="md-nav__link">
    Make sure you have Node npm and http-server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-install-pymapmanager" title="2) Install PyMapManager" class="md-nav__link">
    2) Install PyMapManager
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clone-the-repository" title="Clone the repository" class="md-nav__link">
    Clone the repository
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make-a-virtual-environment-mm_env-and-activate-it" title="Make a virtual environment mm_env and activate it" class="md-nav__link">
    Make a virtual environment mm_env and activate it
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-pymapmanager" title="Install PyMapManager" class="md-nav__link">
    Install PyMapManager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dependencies-for-mmserver" title="Install dependencies for mmserver" class="md-nav__link">
    Install dependencies for mmserver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-either-run-the-servers-with-a-script" title="3) Either, run the servers with a script" class="md-nav__link">
    3) Either, run the servers with a script
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-the-servers-with" title="Start the servers with" class="md-nav__link">
    Start the servers with
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop-the-servers-with" title="Stop the servers with" class="md-nav__link">
    Stop the servers with
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-local-servers" title="Access local servers" class="md-nav__link">
    Access local servers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-or-run-the-servers-manually" title="4) Or, run the servers manually" class="md-nav__link">
    4) Or, run the servers manually
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#run-the-rest-server" title="Run the REST server" class="md-nav__link">
    Run the REST server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#check-the-rest-server" title="Check the rest server" class="md-nav__link">
    Check the rest server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run-the-mmclient-javascript-client" title="Run the mmclient Javascript client" class="md-nav__link">
    Run the mmclient Javascript client
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#view-the-mmclient-at" title="View the mmclient at" class="md-nav__link">
    View the mmclient at
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rewrite-this-to-use-proper-forwarding-in-nginx-using-uwsgi-running-the-clientserver-on-a-linux-system-with-a-pre-existing-web-server" title="[REWRITE THIS TO USE PROPER FORWARDING IN nginx USING uwsgi] Running the client/server on a Linux system with a pre-existing web-server" class="md-nav__link">
    [REWRITE THIS TO USE PROPER FORWARDING IN nginx USING uwsgi] Running the client/server on a Linux system with a pre-existing web-server
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Install client/server</h1>
                
                <h2 id="web-based-browsing">Web based browsing</h2>
<p>Once the PyMapManager <code>mmclient</code> and <code>mmserver</code> are running, there is a point and click web interface to browse Map Manager annotations and images.</p>
<h3 id="browsing-annotations">Browsing annotations</h3>
<p><IMG SRC="../img/mmserver_purejs.png"></p>
<h3 id="browsing-images">Browsing images</h3>
<p><IMG SRC="../img/mmserver_leaflet.png">
<IMG SRC="../img/mmserver_leaflet2.png"></p>
<h2 id="overview">Overview</h2>
<p>PyMapManager can serve Map Manager annotations and images using a client/server model. We use two different servers to acheive this</p>
<ol>
<li><code>mmserver/mmserver.py</code> : Python Flask server to provide a REST interface so a web browser can retrieve Map Manager annotations and images.</li>
<li><code>mmclient/index.html</code> : A front end point-and-click web-browser interface allowing Map Manager annotations and images to be visualized.</li>
</ol>
<h2 id="1-installing-software-to-run-the-servers">1) Installing software to run the servers</h2>
<p>This will work well if you only want to check out the servers. This is not designed for final production which should use Apache or nginx (as opposed to manually running gunicorn and http-server). For final production servers, nginx serves the mmclient Javascript and forwards the REST requests to mmserver using uwsgi.</p>
<p>Running the servers requires some additional software</p>
<ul>
<li><code>mmserver</code>: Requires redis and gunicorn</li>
<li><code>mmclient</code>: Requires node npm and http-server</li>
</ul>
<h3 id="make-sure-you-have-redis">Make sure you have redis</h3>
<pre><code># osx
brew install redis

# linux
sudo apt-get install redis-server # to install redis-server
sudo apt install redis-tools # to install redis-cli

redis-cli ping
# should respond
PONG
</code></pre>
<h3 id="make-sure-you-have-gunicorn">Make sure you have gunicorn</h3>
<p>Wrapping the <code>mmserver</code> to run inside of gunicorn provides a <strong>synchronous</strong> web server. This should handle fast interaction with the web interface much better than the <strong>asynchronous</strong> version provided by <code>python mmserver.py</code>. This is most noticeable when viewing linked sliding z-projections.</p>
<pre><code>pip install gunicorn
</code></pre>
<h3 id="make-sure-you-have-node-npm-and-http-server">Make sure you have Node npm and http-server</h3>
<p>Node install changes based on your flavor of linux, see <a href="https://nodejs.org/en/download/package-manager/">node install instruction</a>.</p>
<pre><code># on debian jessie
curl -sL https://deb.nodesource.com/setup_9.x | sudo -E bash -
sudo apt-get install -y nodejs

# install http-server
sudo npm install http-server -g
</code></pre>
<h2 id="2-install-pymapmanager">2) Install PyMapManager</h2>
<h3 id="clone-the-repository">Clone the repository</h3>
<p>This makes a <code>PyMapManager</code> folder</p>
<pre><code>git clone https://github.com/cudmore/PyMapManager.git
</code></pre>
<h3 id="make-a-virtual-environment-mm_env-and-activate-it">Make a virtual environment <code>mm_env</code> and activate it</h3>
<pre><code>virtualenv mm_env
source mm_env/bin/activate
</code></pre>
<h3 id="install-pymapmanager">Install PyMapManager</h3>
<pre><code># install PyMapManager
pip install -e PyMapManager/
</code></pre>
<h3 id="install-dependencies-for-mmserver">Install dependencies for <code>mmserver</code></h3>
<pre><code>pip install -r PyMapManager/mmserver/requirements.txt
</code></pre>
<h2 id="3-either-run-the-servers-with-a-script">3) Either, run the servers with a script</h2>
<p>Start both unicorn and http-server with our <a href="https://github.com/cudmore/PyMapManager/blob/master/serve_local.sh"><code>PyMapManager/serve_local.sh</code></a> script.</p>
<h3 id="start-the-servers-with">Start the servers with</h3>
<pre><code>cd PyMapManager
./serve_local.sh start
</code></pre>

<h3 id="stop-the-servers-with">Stop the servers with</h3>
<pre><code>cd PyMapManager
./serve_local.sh stop
</code></pre>

<h3 id="access-local-servers">Access local servers</h3>
<p>The front-end client can be accessed at</p>
<pre><code>http://localhost:8080
</code></pre>

<p>The back-end REST server can be accessed at</p>
<pre><code>http://localhost:5010/help
</code></pre>

<h2 id="4-or-run-the-servers-manually">4) Or, run the servers manually</h2>
<h3 id="run-the-rest-server">Run the REST server</h3>
<p>On OSX, use <code>sudo</code>, on linux <strong>do not</strong>.</p>
<pre><code>#osx
cd PyMapManager/mmserver
sudo gunicorn -w 4 -b 0.0.0.0:5010 mmserver:app

#linux
gunicorn -w 4 -b 0.0.0.0:5010 mmserver:app
</code></pre>
<h4 id="check-the-rest-server">Check the rest server</h4>
<p>Here <code>server_ip</code> is the IP address of your server</p>
<pre><code>http://server_ip:5010
</code></pre>
<h3 id="run-the-mmclient-javascript-client">Run the mmclient Javascript client</h3>
<pre><code>cd PyMapManager/mmclient
http-server
</code></pre>
<p>The output should look like this</p>
<pre><code>Starting up http-server, serving ./
Available on:
  http://127.0.0.1:8080
  http://192.168.1.10:8080
Hit CTRL-C to stop the server
</code></pre>

<h4 id="view-the-mmclient-at">View the mmclient at</h4>
<p>Here <code>server_ip</code> is the IP address of your server</p>
<pre><code>http://server_ip:8080
</code></pre>
<h2 id="rewrite-this-to-use-proper-forwarding-in-nginx-using-uwsgi-running-the-clientserver-on-a-linux-system-with-a-pre-existing-web-server">[REWRITE THIS TO USE PROPER FORWARDING IN nginx USING uwsgi] Running the client/server on a Linux system with a pre-existing web-server</h2>
<p>This requires a pre-existing web server to serve both the client server <code>mmclient/index.html</code> and the Python Flask REST server <code>mmserver/mmserver.py</code>.</p>
<p>We have used <code>nginx</code> with success.</p>
<ul>
<li>Get a debian system</li>
<li>Install nginx</li>
</ul>
<pre><code>sudo apt-get install nginx
</code></pre>

<ul>
<li>Copy the <code>mmclient/</code> folder into <code>/var/www/html/mmclient</code></li>
</ul>
<pre><code>sudo cp PyMapManager/mmclient /var/www/html/
</code></pre>

<ul>
<li>
<p>You can now access the mmclient as http://nginx_server_ip/mmclient</p>
</li>
<li>
<p>Make sure the client in <code>mmclient/static/mmserver.js</code> is pointing to the REST server (we will run that next).</p>
</li>
</ul>
<pre><code>sudo pico /var/www/html/mmclient/static/mmserver.js

# make sure the file has
serverurl = 'http://nginx_server_ip:5010/'
</code></pre>

<ul>
<li>Run the Flask server with</li>
</ul>
<pre><code>cd mmserver
screen
gunicorn -b 0.0.0.0:5010 mmserver:app
# exit screen with ctrl+a then d 
</code></pre>

<p>This runs the Flask app <code>app</code> in the python file <code>mmserver.py</code> at the address <code>http://nginx_server_ip:5010</code>. We have used <code>screen</code> so that when you logout of the terminal, the server continues to run. If you need to stop the server, you can use <code>PyMapManager/serve_local.sh stop</code> or return to the <code>screen</code> session with <code>screen -r</code> and hit ctrl+c.</p>
<p>Check the REST server manually by browsing to</p>
<pre><code>http://nginx_server_ip:5010/help
</code></pre>

<p>If that all works, you can browse some maps at</p>
<pre><code>http://nginx_server_ip/mmclient
</code></pre>

<p>This will serve the <code>mmclient/index.html</code> and use the <code>mmclient/static/mmserver.js</code> file. The <code>mmclient/static/mmserver.js</code> file will grab annotations and images from the <code>mmserver/mmserver.py</code> REST server via <code>http://nginx_server_ip:5010</code>.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../install-pymapmanager/" title="Install PyMapManager" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Install PyMapManager
              </span>
            </div>
          </a>
        
        
          <a href="../rest-api/" title="REST API" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                REST API
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.6cdc17f0.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>