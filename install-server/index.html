



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.2.2">
    
    
      
        <title>Install Server - PyMapManager</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.7a4cdee3.css">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="PyMapManager" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                PyMapManager
              </span>
              <span class="md-header-nav__topic">
                Install Server
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="http://github.com/cudmore/PyMapManager" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    PyMapManager
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="http://github.com/cudmore/PyMapManager" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../web-help/" title="Web Help" class="md-nav__link">
      Web Help
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../install-pymapmanager/" title="Install PyMapManager" class="md-nav__link">
      Install PyMapManager
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Install Server
      </label>
    
    <a href="./" title="Install Server" class="md-nav__link md-nav__link--active">
      Install Server
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#web-based-browsing" title="Web based browsing" class="md-nav__link">
    Web based browsing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#browsing-annotations" title="Browsing annotations" class="md-nav__link">
    Browsing annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browsing-images" title="Browsing images" class="md-nav__link">
    Browsing images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download" title="Download" class="md-nav__link">
    Download
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-server" title="Running the server." class="md-nav__link">
    Running the server.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-using-python" title="1) Using Python" class="md-nav__link">
    1) Using Python
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-using-the-docker-container" title="2) Using the Docker container" class="md-nav__link">
    2) Using the Docker container
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#21-using-docker-compose" title="2.1) Using docker-compose" class="md-nav__link">
    2.1) Using docker-compose
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build" title="Build" class="md-nav__link">
    Build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run" title="Run" class="md-nav__link">
    Run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop" title="Stop" class="md-nav__link">
    Stop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22-using-docker" title="2.2) Using docker" class="md-nav__link">
    2.2) Using docker
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build_1" title="Build" class="md-nav__link">
    Build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" title="Redis" class="md-nav__link">
    Redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-server" title="Nginx server" class="md-nav__link">
    Nginx server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop_1" title="Stop" class="md-nav__link">
    Stop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../rest-api/" title="REST API" class="md-nav__link">
      REST API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/a-plotting-annotations/" title="a-plotting-annotations" class="md-nav__link">
      a-plotting-annotations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../dev-notes/" title="Development Notes" class="md-nav__link">
      Development Notes
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../open-source/" title="Open Source" class="md-nav__link">
      Open Source
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#web-based-browsing" title="Web based browsing" class="md-nav__link">
    Web based browsing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#browsing-annotations" title="Browsing annotations" class="md-nav__link">
    Browsing annotations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#browsing-images" title="Browsing images" class="md-nav__link">
    Browsing images
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#download" title="Download" class="md-nav__link">
    Download
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-server" title="Running the server." class="md-nav__link">
    Running the server.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-using-python" title="1) Using Python" class="md-nav__link">
    1) Using Python
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-using-the-docker-container" title="2) Using the Docker container" class="md-nav__link">
    2) Using the Docker container
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#21-using-docker-compose" title="2.1) Using docker-compose" class="md-nav__link">
    2.1) Using docker-compose
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build" title="Build" class="md-nav__link">
    Build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#run" title="Run" class="md-nav__link">
    Run
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop" title="Stop" class="md-nav__link">
    Stop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22-using-docker" title="2.2) Using docker" class="md-nav__link">
    2.2) Using docker
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#build_1" title="Build" class="md-nav__link">
    Build
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" title="Redis" class="md-nav__link">
    Redis
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nginx-server" title="Nginx server" class="md-nav__link">
    Nginx server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop_1" title="Stop" class="md-nav__link">
    Stop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Install Server</h1>
                
                <h2 id="web-based-browsing">Web based browsing</h2>
<p>The PyMapManager server allows Map Manager annotations and time-series images to be browsed with a web interface. It is really easy to run the server on your local machine. For a production level server we provide a Docker container.</p>
<p>For instant satisfaction, we have an <a href="http://cudmore.duckdns.org">experimental server</a> you can use right now.</p>
<h3 id="browsing-annotations">Browsing annotations</h3>
<p><IMG SRC="../img/mmserver_purejs.png"></p>
<h3 id="browsing-images">Browsing images</h3>
<p><IMG SRC="../img/mmserver_leaflet.png">
<IMG SRC="../img/mmserver_leaflet2.png"></p>
<h2 id="download">Download</h2>
<p>To run the server locally, you need some data! Example data can be downloaded from the PyMapManager-Data repository. The first thing to do is to clone both the <a href="https://github.com/cudmore/PyMapManager">PyMapManager</a> and the <a href="https://github.com/mapmanager/PyMapManager-Data">PyMapManager-Data</a> repositories.</p>
<pre><code>git clone  --depth=1 https://github.com/cudmore/PyMapManager.git
git clone  --depth=1 https://github.com/mapmanager/PyMapManager-Data.git
</code></pre>
<h2 id="running-the-server">Running the server.</h2>
<h2 id="1-using-python">1) Using Python</h2>
<p>Simplest case is to use <code>python mmserver.py</code> and you should be up in no time.</p>
<pre><code># install pymapmanager
pip install PyMapManager/
# install required server libraries
pip install -r PyMapManager/mmserver/requirements.txt

# run the server
cd PyMapManager/mserver
python mmserver.py
</code></pre>
<p>Point your browser to <code>http://localhost:5000</code> and have fun browsing.</p>
<h2 id="2-using-the-docker-container">2) Using the Docker container</h2>
<p>Running the server from within a Docker container has lots of benefits. First off, the Docker container spins up a proper <a href="https://www.nginx.com/">nginx</a> web server and runs multiple copies of the python code in mmserver.py. With this system, the server is really responsive even when multiple requests are coming in fast as happens when images are scrolled.</p>
<p>To get started, download and install <a href="https://docs.docker.com/install/">Docker Community Edition (CE)</a>.</p>
<h2 id="21-using-docker-compose">2.1) Using docker-compose</h2>
<p>If you want to run the server inside a <a href="https://www.docker.com/community-edition">Docker</a> container, the easiest option is to use <code>docker-compose</code>. Using this technique makes a very efficient production level server and is exactly what we are using at <a href="http://cudmore.duckdns.org">http://cudmore.duckdns.org</a>.</p>
<h3 id="build">Build</h3>
<pre><code>cd PyMapManager
docker-compose build # this will take a few minutes the first time it is run
</code></pre>
<h3 id="run">Run</h3>
<pre><code>docker-compose up
</code></pre>
<p>Point your browser to <code>http://localhost</code> and have fun browsing.</p>
<h3 id="stop">Stop</h3>
<pre><code>docker-compose down

# stop all docker containers
docker stop $(docker ps -aq)
</code></pre>
<h2 id="22-using-docker">2.2) Using docker</h2>
<p>If you prefer to run the docker services separately and specify paths on the command line.</p>
<h3 id="build_1">Build</h3>
<pre><code>cd PyMapManager
docker build -t myimage . # the dot is important
</code></pre>
<h3 id="redis">Redis</h3>
<pre><code>docker run -d --name redis -p 6379:6379 redis
</code></pre>
<h3 id="nginx-server">Nginx server</h3>
<p>In the following docker command, <code>/Users/cudmore/Dropbox/PyMapManager-Data</code> has to be changed to point to the full path of your local copy of <code>PyMapManager-Data</code>.</p>
<pre><code>cd PyMapManager
docker run --name mycontainer -p 80:80 -v /Users/cudmore/Dropbox/PyMapManager-Data:/PyMapManager-Data --link redis myimage
</code></pre>
<p>Point your browser to <code>http://localhost</code> and have fun browsing.</p>
<h3 id="stop_1">Stop</h3>
<pre><code>docker stop mycontainer
docker rm mycontainer

docker stop redis
docker rm redis
</code></pre>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../install-pymapmanager/" title="Install PyMapManager" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Install PyMapManager
              </span>
            </div>
          </a>
        
        
          <a href="../rest-api/" title="REST API" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                REST API
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.6cdc17f0.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>